<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2026 å¾·ç‘ç‘å£«ä¹‹æ—…</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --jp-wash: #F8F9F7; --accent: #2C3E50; --highlight: #D4A373; }
        body { background: var(--jp-wash); font-family: "PingFang TC", "Microsoft JhengHei", sans-serif; padding-bottom: 80px; color: #333; }
        .content-section { display: none; padding: 15px; animation: fadeIn 0.3s ease; }
        .content-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .card-custom { background: white; border-radius: 12px; padding: 18px; margin-bottom: 12px; border: none; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .day-label { font-size: 1.1rem; font-weight: bold; border-bottom: 2.5px solid var(--accent); display: inline-block; margin: 15px 0 10px; letter-spacing: 1px; }
        .bottom-nav { position: fixed; bottom: 0; width: 100%; background: white; border-top: 1px solid #EEE; display: flex; justify-content: space-around; padding: 10px 0; z-index: 1000; }
        .nav-item { color: #BBB; text-decoration: none; text-align: center; font-size: 0.7rem; cursor: pointer; flex: 1; }
        .nav-item.active { color: var(--accent); font-weight: bold; }
        .nav-item i { font-size: 1.3rem; display: block; margin-bottom: 3px; }
        .budget-sum { background: var(--accent); color: white; border-radius: 15px; padding: 25px; text-align: center; margin-bottom: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .btn-nav { background: #333; color: white; border-radius: 50px; font-size: 0.75rem; padding: 6px 15px; text-decoration: none; display: inline-flex; align-items: center; }
    </style>
</head>
<body>

<div class="p-4 text-center bg-white border-bottom">
    <h1 style="font-size: 1.2rem; letter-spacing: 4px; margin:0; font-weight: 300;">EUROPE 2026</h1>
    <small class="text-muted">Germany â€¢ Norway Cruise â€¢ Switzerland</small>
</div>

<div id="itinerary" class="content-section active">
    <div class="day-label">9/12 - 9/19 MSC æŒªå¨éƒµè¼ª</div>
    <div class="card-custom">
        <h6 class="fw-bold">ğŸš¢ MSC Euribia å•Ÿèˆª</h6>
        <p class="small text-muted mb-2">è·¯ç·šï¼šåŸºçˆ¾(Kiel) â” å“¥æœ¬å“ˆæ ¹ â” è“‹æœ—å„çˆ¾ â” å¥§å‹’æ¾ â” å¼—æ´›å§†</p>
        <div class="small p-2 bg-light rounded mb-2"><strong>å¿…åšï¼š</strong>åœ¨è“‹æœ—å„çˆ¾ç”²æ¿çœ‹ç€‘å¸ƒã€èˆ¹ä¸Šäº«ç”¨æ³•å¼æ™šé¤ã€‚</div>
        <a href="https://www.google.com/maps/search/Kiel+Cruise+Terminal" class="btn-nav"><i class="fas fa-ship me-2"></i>å‰å¾€ç¢¼é ­å°èˆª</a>
    </div>

    <div class="day-label">9/19 (å…­) ç§»å‹•è‡³ç‘å£«</div>
    <div class="card-custom">
        <h6 class="fw-bold">âœˆ æ¼¢å ¡ â” è˜‡é»ä¸– â” ç‰æ£®</h6>
        <p class="small">èˆªç­ LX1057 (09:20-11:35)ã€‚ä¸‹åˆå…¥ä½ç‰æ£® Hotelï¼Œå‚æ™šé€›è€åŸå€èˆ‡å¡è²çˆ¾æ©‹ã€‚</p>
    </div>

    <div class="day-label">9/20 - 9/22 å°‘å¥³å³°åœ°å€</div>
    <div class="card-custom">
        <h6 class="fw-bold">ğŸ” ç‘å‰å±± & æº«æ ¹/ç±³å€«</h6>
        <p class="small mb-1">9/20: ç‘å‰å±±çœ‹ 360 åº¦å±±æ™¯ï¼Œå®¿ Wengenã€‚</p>
        <p class="small mb-1">9/21: MÃ¤nnlichen â” Kleine Scheidegg å…¨æ™¯å¥è¡Œã€‚</p>
        <p class="small">9/22: é›ªæœ—å³° 007 å±•æœ›å°ï¼Œå›ç¨‹é€›ç„¡è¸å°é®ç±³å€«ã€‚</p>
    </div>

    <div class="day-label">9/23 - 9/25 ç­–é¦¬ç‰¹é¦¬ç‰¹æ´ªå³°</div>
    <div class="card-custom">
        <h6 class="fw-bold">ğŸ—» ç­–é¦¬ç‰¹æ·±åº¦å¥è¡Œ</h6>
        <p class="small mb-1">9/23: å„å¸Œå«©æ¹–è—è‰²æ¹–æ°´ã€‚å‚æ™šæŠµé”ç­–é¦¬ç‰¹ã€‚</p>
        <p class="small mb-1">9/24: Gornergrat ç«è»Šï¼ŒRotenboden ä¸‹è»Šçœ‹é¦¬ç‰¹æ´ªå³°å€’å½±ã€‚</p>
        <p class="small">9/25: Sunnegga äº”æ¹–å¥è¡Œï¼ŒæŒ‘æˆ° Stellisee ç¶“å…¸è§’åº¦ã€‚</p>
    </div>

    <div class="day-label">9/26 - 9/27 ç±³è˜­èˆ‡è³¦æ­¸</div>
    <div class="card-custom">
        <h6 class="fw-bold">ğŸ‡®ğŸ‡¹ ç±³è˜­å¤§æ•™å ‚ â” è¿”åœ‹</h6>
        <p class="small">9/26: ç¶“ Visp è½‰è»Šå‰å¾€ç±³è˜­ã€‚9/27: ä¸‹åˆå‰å¾€ MXP æ©Ÿå ´æ­æ©Ÿã€‚</p>
    </div>
</div><div id="budget" class="content-section">
    <div class="budget-sum">
        <small style="opacity: 0.8; letter-spacing: 1px;">æ—…ç¨‹ç¸½æ”¯å‡ºä¼°ç®— (TWD)</small>
        <div class="h1 my-2">NT$ <span id="total-twd">0</span></div>
        <div class="small" style="font-size:0.75rem; border-top: 1px solid rgba(255,255,255,0.2); padding-top: 10px;">
            CHF: <span id="total-chf">0</span> | EUR: <span id="total-eur">0</span> | HKD: <span id="total-hkd">0</span>
        </div>
    </div>

    <div class="card-custom">
        <div class="d-flex justify-content-between align-items-center mb-2">
            <h6 class="fw-bold m-0">åŒ¯ç‡è¨­å®š</h6>
            <button class="btn btn-sm btn-outline-primary" style="font-size: 0.7rem;" onclick="fetchRates()">
                <i class="fas fa-sync-alt"></i> æ›´æ–°å³æ™‚åŒ¯ç‡
            </button>
        </div>
        <div class="row g-2 mb-3">
            <div class="col-4"><label class="small text-muted">CHF â” TWD</label><input type="number" id="rate-chf" class="form-control form-control-sm" value="38.5" onchange="render()"></div>
            <div class="col-4"><label class="small text-muted">EUR â” TWD</label><input type="number" id="rate-eur" class="form-control form-control-sm" value="34.2" onchange="render()"></div>
            <div class="col-4"><label class="small text-muted">HKD â” TWD</label><input type="number" id="rate-hkd" class="form-control form-control-sm" value="4.1" onchange="render()"></div>
        </div>
        <hr>
        <div class="mb-2">
            <input type="text" id="exp-name" class="form-control form-control-sm mb-2" placeholder="é …ç›®å…§å®¹ (å¦‚: é¦™æ¸¯æ©Ÿå ´æ—©é¤)">
            <div class="input-group input-group-sm mb-2">
                <select id="exp-curr" class="form-select" style="max-width: 85px;">
                    <option>CHF</option>
                    <option>EUR</option>
                    <option>HKD</option>
                    <option>TWD</option>
                </select>
                <input type="number" id="exp-amt" class="form-control" placeholder="é‡‘é¡">
            </div>
            <textarea id="exp-note" class="form-control form-control-sm" placeholder="å‚™è¨»å…§å®¹"></textarea>
        </div>
        <button class="btn btn-dark w-100 btn-sm shadow-sm" onclick="addExp()">è¨˜éŒ„é€™ç­†æ”¯å‡º</button>
    </div>

    <div id="exp-list"></div>
    <button class="btn btn-link btn-sm w-100 text-muted mt-4" onclick="clearAll()">æ¸…ç©ºæ‰€æœ‰è¨˜å¸³ç´€éŒ„</button>
</div>

<nav class="bottom-nav">
    <div class="nav-item active" onclick="switchTab('itinerary', this)"><i class="fas fa-calendar-alt"></i>è¡Œç¨‹</div>
    <div class="nav-item" onclick="switchTab('budget', this)"><i class="fas fa-wallet"></i>è¨˜å¸³</div>
</nav>

<script>
    function switchTab(id, el) {
        document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        el.classList.add('active');
        window.scrollTo(0,0);
    }

    async function fetchRates() {
        try {
            const res = await fetch('https://open.er-api.com/v6/latest/TWD');
            const data = await res.json();
            if (data && data.rates) {
                const chfRate = (1 / data.rates.CHF).toFixed(2);
                const eurRate = (1 / data.rates.EUR).toFixed(2);
                const hkdRate = (1 / data.rates.HKD).toFixed(2);
                document.getElementById('rate-chf').value = chfRate;
                document.getElementById('rate-eur').value = eurRate;
                document.getElementById('rate-hkd').value = hkdRate;
                alert('åŒ¯ç‡å·²æ›´æ–°ï¼\nCHF: ' + chfRate + '\nEUR: ' + eurRate + '\nHKD: ' + hkdRate);
                render();
            }
        } catch (e) {
            alert('ç„¡æ³•ç²å–å³æ™‚åŒ¯ç‡ï¼Œè«‹æ‰‹å‹•è¼¸å…¥ã€‚');
        }
    }

    let expenses = JSON.parse(localStorage.getItem('trip_v2026')) || [];

    function addExp() {
        const name = document.getElementById('exp-name').value;
        const amt = document.getElementById('exp-amt').value;
        const curr = document.getElementById('exp-curr').value;
        const note = document.getElementById('exp-note').value;
        if (name && amt) {
            expenses.push({ name, amt: parseFloat(amt), curr, note, id: Date.now() });
            document.getElementById('exp-name').value = '';
            document.getElementById('exp-amt').value = '';
            document.getElementById('exp-note').value = '';
            render();
        }
    }

    function render() {
        const list = document.getElementById('exp-list');
        const rCHF = parseFloat(document.getElementById('rate-chf').value) || 0;
        const rEUR = parseFloat(document.getElementById('rate-eur').value) || 0;
        const rHKD = parseFloat(document.getElementById('rate-hkd').value) || 0;
        list.innerHTML = ''; 
        let sCHF = 0, sEUR = 0, sHKD = 0, sTWD = 0;

        expenses.forEach((ex, i) => {
            let t = 0;
            if(ex.curr === 'CHF') { t = ex.amt * rCHF; sCHF += ex.amt; }
            else if(ex.curr === 'EUR') { t = ex.amt * rEUR; sEUR += ex.amt; }
            else if(ex.curr === 'HKD') { t = ex.amt * rHKD; sHKD += ex.amt; }
            else { t = ex.amt; }
            sTWD += t;

            list.innerHTML += `
                <div class="card-custom">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <div class="fw-bold">${ex.name}</div>
                            <div class="small text-muted">${ex.curr} ${ex.amt} â” <span class="text-dark fw-bold">NT$ ${Math.round(t)}</span></div>
                        </div>
                        <button class="btn btn-sm text-danger" onclick="del(${i})"><i class="fas fa-trash"></i></button>
                    </div>
                    ${ex.note ? `<div class="small mt-2 p-2 bg-light rounded" style="font-size: 0.75rem; border-left: 3px solid #DDD;">${ex.note}</div>` : ''}
                </div>`;
        });

        document.getElementById('total-twd').innerText = Math.round(sTWD).toLocaleString();
        document.getElementById('total-chf').innerText = sCHF.toLocaleString();
        document.getElementById('total-eur').innerText = sEUR.toLocaleString();
        document.getElementById('total-hkd').innerText = sHKD.toLocaleString();
        localStorage.setItem('trip_v2026', JSON.stringify(expenses));
    }

    function del(i) { if(confirm('åˆªé™¤é€™ç­†é–‹æ”¯ï¼Ÿ')) { expenses.splice(i, 1); render(); } }
    function clearAll() { if(confirm('ç¢ºå®šæ¸…é™¤æ‰€æœ‰ç´€éŒ„ï¼Ÿè³‡æ–™ç„¡æ³•å¾©åŸã€‚')) { expenses = []; render(); } }
    render();
</script>
</body>
</html>